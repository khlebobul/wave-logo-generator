let img,lines=100,pointsPerLine=100,amp,bgColor,lineColor,lineWidth=2,imgScale=.5,dropArea;function setup(){windowWidth<750&&windowWidth>=470?createCanvas(400,400):windowWidth<470?createCanvas(300,300):createCanvas(600,600),amp=height/lines,noFill(),bgColor=color("#2541E1"),lineColor=color("#FFFFFF")}function draw(){background(bgColor),img&&(stroke(lineColor),strokeWeight(lineWidth),drawLines())}function drawLines(){let e=height/(lines+1);for(let t=1;t<=lines;t++){let n=t*e;beginShape(),drawPoints(n),endShape()}}function drawPoints(e){let t=width/(pointsPerLine+1);for(let n=1;n<=pointsPerLine;n++){let i=n*t,o=getVerticalOffset(i,e);vertex(i,e+o)}}function getVerticalOffset(e,t){let[n,i]=canvasToImageCoords(e,t);if(n=floor(n),i=floor(i),n<0||n>img.width-1||i<0||i>img.height-1)return 0;let o=(i*img.width+n)*4,a=img.pixels[o];return img.pixels[o+1],img.pixels[o+2],0===img.pixels[o+3]?0:map(a,0,255,-amp,0)}function canvasToImageCoords(e,t){e-=width/2,t-=height/2;let n=imgScale;return e/=n,t/=n,[e+=img.width/2,t+=img.height/2]}function loadImageFromFile(e){if(e){let t=e.name.split(".").pop().toLowerCase();if("svg"===t){let n=new FileReader;n.onload=function(t){t.target.result;let n=new Image;n.onload=function(){(img=createImage(n.width,n.height)).loadPixels();let e=document.createElement("canvas");e.width=img.width,e.height=img.height;let t=e.getContext("2d");t.drawImage(n,0,0);let i=t.getImageData(0,0,img.width,img.height);img.pixels=i.data,img.updatePixels(),document.getElementById("drop-area").style.opacity="0"},n.src=URL.createObjectURL(e)},n.readAsDataURL(e)}else if("png"===t||"jpg"===t||"jpeg"===t){let i=new FileReader;i.onload=function(e){img=loadImage(e.target.result,function(){img.loadPixels(),document.getElementById("drop-area").style.opacity="0"})},i.readAsDataURL(e)}else console.log("Unsupported file format")}}function windowResized(){windowWidth<750&&windowWidth>=470?resizeCanvas(400,400):windowWidth<470?resizeCanvas(300,300):resizeCanvas(600,600)}function iconNodeToString(e){var t=e[0],n="";return e[1]&&(n=Object.entries(e[1]).map(([e,t])=>`${e}="${t}"`).join(" ")),`<${t} ${n}>${(e[2]||[]).map(e=>iconNodeToString(e)).join("")}</${t}>`}function createSVGElement(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}function openModal(){document.getElementById("iconPickerModal").style.display="block"}function closeModal(){document.getElementById("iconPickerModal").style.display="none"}document.getElementById("choose-file").addEventListener("change",function(e){let t=e.target.files[0];if(t){let n=new FileReader;n.onload=function(e){img=loadImage(e.target.result,function(){img.loadPixels(),document.getElementById("drop-area").style.opacity="0"})},n.readAsDataURL(t)}}),document.getElementById("drop-area").addEventListener("drop",function(e){e.preventDefault(),e.stopPropagation();let t=e.dataTransfer.files[0];loadImageFromFile(t),document.getElementById("drop-area").style.opacity="0"}),document.getElementById("drop-area").addEventListener("dragover",function(e){e.preventDefault(),e.stopPropagation()}),document.getElementById("choose-background-color").addEventListener("input",function(e){bgColor=color(e.target.value)}),document.getElementById("choose-wave-color").addEventListener("input",function(e){lineColor=color(e.target.value)}),document.getElementById("choose-line-width").addEventListener("input",function(e){lineWidth=parseInt(e.target.value)}),document.getElementById("choose-number-of-lines").addEventListener("input",function(e){lines=parseInt(e.target.value)}),document.getElementById("choose-points-per-line").addEventListener("input",function(e){pointsPerLine=parseInt(e.target.value)}),document.getElementById("choose-icon-size").addEventListener("input",function(e){imgScale=parseFloat(e.target.value)}),document.getElementById("save-png").addEventListener("click",function(){saveCanvas("wave-logo-generator","png")}),document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("iconGrid");for(var t in lucide){var n=iconNodeToString(lucide[t]),i=createSVGElement(n),o=document.createElement("div");o.classList.add("icon-wrapper"),o.setAttribute("data-lucide",t.toLowerCase()),o.appendChild(i),e.appendChild(o)}}),document.getElementById("searchIconInput").addEventListener("input",function(){var e=this.value.toLowerCase();document.querySelectorAll("#iconGrid .icon-wrapper").forEach(function(t){var n=t.getAttribute("data-lucide");n&&n.includes(e)?t.style.display="inline-block":t.style.display="none"})});